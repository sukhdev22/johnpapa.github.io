<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>JohnPapa.net</title>
    
    <meta name="author" content="John Papa">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

    <!-- Le styles -->
    <link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
    <link href="/assets/css/style.css" rel="stylesheet">

    <link rel="shortcut icon" type="image/x-icon" href="assets/ico/favicon.ico">

    <!-- Le fav and touch icons -->
    <!-- Update these with your own images
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

    <link rel="alternate" type="application/rss+xml" title="" href="/feed.xml">

</head>

<body>
    <nav class="navbar navbar-default visible-xs" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            
            <a type="button" class="navbar-toggle nav-link" href="http://github.com/johnpapa">
                <i class="fa fa-github"></i>
            </a>
            
            
            <a type="button" class="navbar-toggle nav-link" href="http://twitter.com/john_papa">
                <i class="fa fa-twitter"></i>
            </a>
            
            
            <a class="navbar-brand" href="/">
                <img src="http://www.gravatar.com/avatar/0d3794fe37746ea54926ca6878712721?s=35" class="img-circle" />
                
            </a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav">
                <li class="active"><a href="/">Home</a></li>
                <li><a href="/categories.html">Categories</a></li>
                <li><a href="/tags.html">Tags</a></li>
            </ul>
        </div><!-- /.navbar-collapse -->
    </nav>

    <!-- nav-menu-dropdown -->
    <div class="btn-group hidden-xs" id="nav-menu">
        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
            <i class="fa fa-bars"></i>
        </button>
        <ul class="dropdown-menu" role="menu">
            <li><a href="/"><i class="fa fa-home"></i>Home</a></li>
            <li><a href="/categories.html"><i class="fa fa-folder"></i>Categories</a></li>
            <li><a href="/tags.html"><i class="fa fa-tags"></i>Tags</a></li>
            <li class="divider"></li>
            <li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
        </ul>
    </div>

    <div class="col-sm-4 sidebar hidden-xs hidden-sm not-mobile">
        <!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<h1 class="text-center">John Papa</h1>
	<a href="/">
		<img src="http://www.gravatar.com/avatar/0d3794fe37746ea54926ca6878712721?s=150" class="img-circle" />
	</a>
	<h3 class="title">
		<a href="/"></a>
	</h3>
</header>


<div id="bio" class="text-center">
	Evangelist on the Loose
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/johnpapa">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		 
		<li>
			<a class="btn btn-default btn-sm" href="https://twitter.com/john_papa">
				<i class="fa fa-twitter fa-lg"></i>
			</a>
		</li>
		<li>
			<a class="btn btn-default btn-sm" href="/feed.xml">
				<i class="fa fa-rss fa-lg"></i>
			</a>
		</li>
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		 
	</ul>

	<div class="sidebar-content">

		<nav id="page-nav">
			<ul class="main-navigation list-unstyled list-inline">
				<li><a href="/about/">About</a></li>
				<li><a href="/articles">Articles</a></li>
				<li><a href="/spa">SPA</a></li>
				<li><a href="/videos">Videos</a></li>
			</ul>
		</nav>

		<h5>Recent Posts</h5>
		<ul class="list-unstyled">
			
				<li>
					<span>16 Sep 2015</span> &raquo;
					<a href="/angular/angular2/community/event/javascript/uncategorized/2015/09/16/angular-2-hack-night-coming-to-orlando.html">
					Angular 2 Hack Night Coming to Orlando</a>
				</li>
			
				<li>
					<span>29 Aug 2015</span> &raquo;
					<a href="/angular/asp.net/github/gulp/html5/javascript/pluralsight/typescript/uncategorized/visual%20studio%20code/2015/08/29/learning-visual-studio-code.html">
					Learning Visual Studio Code</a>
				</li>
			
				<li>
					<span>23 May 2015</span> &raquo;
					<a href="/uncategorized/2015/05/23/visual-studio-code-webinar.html">
					Visual Studio Code Webinar</a>
				</li>
			
				<li>
					<span>23 May 2015</span> &raquo;
					<a href="/uncategorized/2015/05/23/automatically-restarting-asp-net-on-osx-with-dnxmon.html">
					Automatically Restarting ASP.NET on OSX with DNXMON</a>
				</li>
			
				<li>
					<span>23 May 2015</span> &raquo;
					<a href="/uncategorized/2015/05/23/getting-started-with-asp-net-5-on-osx.html">
					Getting Started with ASP.NET 5 on OSX</a>
				</li>
			
				<li>
					<span>29 Apr 2015</span> &raquo;
					<a href="/uncategorized/2015/04/29/refactoring-with-visual-studio-code.html">
					Refactoring with Visual Studio Code</a>
				</li>
			
				<li>
					<span>29 Apr 2015</span> &raquo;
					<a href="/uncategorized/2015/04/29/intellisense-witha-visual-studio-code.html">
					Intellisense with Visual Studio Code</a>
				</li>
			
				<li>
					<span>29 Apr 2015</span> &raquo;
					<a href="/uncategorized/2015/04/29/git-and-preferences-in-visual-studio-code.html">
					Git and Preferences in Visual Studio Code</a>
				</li>
			
				<li>
					<span>29 Apr 2015</span> &raquo;
					<a href="/uncategorized/2015/04/29/debugging-with-visual-studio-code.html">
					Debugging with Visual Studio Code</a>
				</li>
			
				<li>
					<span>29 Apr 2015</span> &raquo;
					<a href="/uncategorized/2015/04/29/visual-studio-code.html">
					Introducing Visual Studio Code</a>
				</li>
			
		</ul>
	</div>

</div>
<!-- sidebar.html end -->
        <div class="not-mobile row sidebar-extras">
            <table class="col-centered">
                <tbody>
                    <tr>
                        <td>
                            <div data-type="ad" data-publisher="lqm.johnpapa.site" data-zone="ron" data-format="160x600"></div>
                        </td>
                        <td>
                            <div data-type="ad" data-publisher="lqm.johnpapa.site" data-zone="ron" data-format="160x600"></div>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <div data-type="ad" data-publisher="lqm.johnpapa.site" data-zone="ron" data-format="300x250"></div>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <div data-type="ad" data-publisher="lqm.johnpapa.site" data-zone="ron" data-format="300x250"></div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="col-sm-8">
        <div class="page-header">
  <h1>JohnPapa.net </h1>
</div>



<article class="home">

  <span class="post-date">
    
    August
    30th,
    
    2012
  </span>

  <h2>
    <a href="/free300th/2012/08/30/pluralsight-spa-javascript-jquery-html5-asp-net.html">Free Pluralsight Course on SPAs for the 48 Hours</a>
  </h2>

  <div>
    
    
    <p>Today my latest course <a href="http://jpapa.me/spaps">Single Page Apps with HTML5, ASP.NET Web API, Knockout and jQuery</a> became available at <a href="http://pluralsight.net/">Pluralsight</a>!  <p>This also happens to be the 300th course released by Pluralsight! To celebrate, they are offering my course for free for 48 hours (<a href="http://blog.pluralsight.com/2012/08/29/our-300th-course-watch-it-free-for-24-hours/">see web site for exact terms and details</a>). <p><a href="http://jpapa.me/spaps"><img style="background-image: none; border-bottom: 0px; border-left: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; margin-left: auto; border-top: 0px; margin-right: auto; border-right: 0px; padding-top: 0px" title="image" border="0" alt="image" src="/wp-content/uploads/media/Windows-Live-Writer/072c5bd0c2ca_11C09/image_3.png" width="430" height="86" /></a>Follow <a href="https://twitter.com/pluralsight">@pluralsight</a> and <a href="http://twitter.com/john_papa">@john_papa</a> on Twitter to find out about other great offers like this, and feel free to <strong><a href="https://twitter.com/intent/tweet?source=webclient&amp;text=W00t!%20Pluralsight%20just%20published%20their%20300th%20course!%20%20Watch%20@johnpapa's%20SPA%20course%20FREE%20for%2048%20hours:%20http://wp.me/p1lig2-1rI&amp;original_referer=http://wp.me/p1lig2-1rI">Tweet this offer</a></strong> to everyone you know.&nbsp;



</p></p></p>

    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    August
    26th,
    
    2012
  </span>

  <h2>
    <a href="/data/patterns/pluralsight/spa/uncategorized/2012/08/26/spapost8.html">Build Single Page Apps - Part 8 - JavaScript Data Services</a>
  </h2>

  <div>
    
    
    <p>I love to write code, but that doesn’t mean I want to write the same code over and over again. And I certainly don’t want to have to hunt down all that redundant code when I want to refactor a few pieces of it. That’s why I am a huge advocate for the <a href="http://en.wikipedia.org/wiki/Single_responsibility_principle">Single Responsibility Principle (SRP)</a> … or in simplest terms, I prefer to make smaller sets of code that have a primary focus. In JavaScript, that means modules like the ones below.</p>

<p><a href="/wp-content/uploads/media/Windows-Live-Writer/Build-Single-Page-Apps---Part-8---Data-S_14EC6/image_4.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: block; float: none; margin-left: auto; margin-right: auto; padding-top: 0px; border-width: 0px;" title="image" src="/wp-content/uploads/media/Windows-Live-Writer/Build-Single-Page-Apps---Part-8---Data-S_14EC6/image_thumb_1.png" alt="image" width="520" height="307" border="0" /></a></p>

<p>You’ll see examples of modules such as Models, a Data Service and a Data Context in my upcoming <a href="http://www.pluralsight.com/">Pluralsight</a> course titled “Building Single Page Apps (SPA) with HTML5, ASP.NET Web API, Knockout and jQuery”. (due to go live on Pluralsight in a week!).</p>

<p>You can catch up on the previous posts in this series here:</p>
<h2>More on the Code Camper SPA</h2>
<p>Part 1 - <a href="http://jpapa.me/spapost1">The Story Begins (What is the Code Camper SPA?)</a></p>

<p>Part 2 - <a href="http://jpapa.me/spapost2">Client Technologies</a></p>

<p>Part 3 - <a href="/spapost3">Server Technologies (the Data Layer)</a></p>

<p>Part 4 - <a href="http://jpapa.me/spapost4">Serving JSON with ASP.NET Web API</a></p>

<p>Part 5 - <a href="http://jpapa.me/spapost5">HTML 5 and ASP.NET Web Optimization</a></p>

<p>Part 6 - <a href="http://jpapa.me/spapost6">JavaScript Modules</a></p>

<p>Part 7 - <a href="http://jpapa.me/spapost7">MVVM and KnockoutJS</a></p>

<p>Part 8 - <a href="http://jpapa.me/spapost8">Data Services on the Client</a></p>

<p>Part 9 - <a href="http://jpapa.me/spapost9">Navigation, Transitions, Storage and Messaging</a></p>

<p>Part 10 - <a href="http://jpapa.me/spapost10">Saving, Change Tracking, and Commanding</a></p>

<p>Part 11 - Responsive Design and Mobility</p>
<h2>Data Context</h2>
<p>In the previous post (part 7) I discussed how I prefer the data binding techniques of KnockoutJS and the MVVM pattern in JavaScript. You can go check out an example of a ViewModel in that post. The ViewModel has a method named getSpeaker which defers its data retrieval to a datacontext module. It goes something like this:</p>
<pre class="csharpcode">datacontext.persons.getFullPersonById( currentSpeakerId() );</pre>
<p> </p>

<p>All view models in the application need data. When they need to get it or save it, they turn to the datacontext module who is responsible for getting or saving the data. Sound simple? Well, that’s the point. This data context module is like a client side repository.</p>

<p>The view model doesn’t care how the data is retrieved, it doesn’t care if its going to require an asynchronous call or not, it just wants the data. The datacontext hides all of the logic to retrieve (or save) the data so the view models just interact with the datacontext’s API.</p>
<h2>Smart Caching</h2>
<p>The datacontext in my app is smart enough to hang onto data once it gets it. When a request comes in for data, the datacontext checks if it has the data already. If so, it returns it. If not, it goes and gets it via an Ajax call (actually it defers the retrieval to a Data Service module … but more on that in a minute).</p>

<p>The datacontext’s getData method looks something like this (I shortened it just to get the main points across)</p>
<pre class="csharpcode">getData = function(...) {
<span class="kwrd">return</span> $.Deferred(function(def) {
<span class="rem">// If the internal items object doesnt exist, </span>
<span class="rem">// or we force a refresh</span>
<span class="kwrd">if</span> (forceRefresh || !items) {
getFunction({
success: function(dtoList) {
mapToContext(...);
def.resolve(results);
},
error: function (response) {
logger.error(config.toasts.errorGettingData);
def.reject();
}
}, param);
} <span class="kwrd">else</span> {
itemsToArray(...);
def.resolve(results);
}
}).promise();
}</pre>
<h1>Consistent Expectations</h1>
<p>Pay particular attention to the $.Deferred in this code. This function always returns a promise to the caller (the view model in my example). This provides a consistent expectations to the caller whether the data was retrieved from cache (which doesn’t require an async call) or an async Ajax call to the Web API on the server. This makes it easy to call the code and test it. (Yup, there’s unit tests in my app.)</p>
<h2>Data Service</h2>
<p>I mentioned that the data context handles getting and saving the data. That’s true, but more specifically it handles the job of figuring out how whether it has the data or not, and then if it does not have the data it asks the dataservice module to go get it.</p>

<p>The Data Service module (aka dataservice) makes the request for the data from whatever web service it needs to talk to. It has a simple interface so the datacontext can simply make a request like this:</p>

<p>dataservice.person.getPersons()</p>

<p>Remember that getFunction call up in the datacontext code we just looked at? If not, go look. I’ll wait.</p>

<p>That getFunction call is a delegate for the dataservice.person.getPersons (for example). So if we call it directly we could do it like this:</p>
<pre class="csharpcode">dataservice.person.getSpeakers({
success: function() { ... },
error: function() { ... }
});</pre>
<h2>The Payoff</h2>
<p>This abstraction of data services and data contexts makes it simple to make calls for the same data from multiple places (including view models). So I reap the benefits of:</p>
<ol>
	<li>Code re-use and less repeating myself (DRY)</li>
	<li>Testable modules</li>
	<li>Easier maintenance (when refactoring)</li>
</ol>
<p>In the course I go deeper into these topics and how the data service promotes the use of switching between sample (or mock) data and live data. There are also modules for model factories for the observables (if you so choose to create them).</p>
<h2>Make it Your Own</h2>
<p>I’m very excited to see how people refactor the sample app I include in the course (for Plus subscribers) to add their own ideas. There are so many other angles I would love to have hit, but I made the decision early on to choose one path and explain it.Otherwise there was too much risk of getting myself derailed. The course follows one option for building a SPA but I also can see myself expanding on it for a follow up later. Sigh … but first, I’ll finish this series (next up, navigation) … then I need a vacation <img class="wlEmoticon wlEmoticon-smile" style="border-style: none;" src="/wp-content/uploads/media/Windows-Live-Writer/Build-Single-Page-Apps---Part-8---Data-S_14EC6/wlEmoticon-smile_2.png" alt="Smile" /></p>

<p> </p>
<h2><span style="color: #ff0000;"><strong>UPDATE: </strong></span></h2>
<p>I wrote myself a reminder (and promptly forgot) to mention 2 libraries that could replace my datacontext module. I am looking forward to when they go to their final release stage: Upshot.js and <a href="http://www.breezejs.com/">BreezeJS</a>. Upshot (by the Microsoft ASP.NET team) has been around for a while in pre-release form, but it’s not at a point where I feel comfortable using it just yet. However it has a lot of potential and I am all over it once it is released. The other is BreezeJS, by <a href="http://www.ideablade.com/">ideablade</a>. These guys have been in this space before with WinForms, Silverlight, WPF and are BreezeJS is there new JavaScript offerring. Breeze is not out yet but will be here soon, I am told. Neither is something I would use today, but both are intriguing enough where it could dramatically simplify (and reduce or eliminate) my datacontext module with the same and even more functionality. I’m all for “better”!</p>


    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    August
    23rd,
    
    2012
  </span>

  <h2>
    <a href="/pluralsight/2012/08/23/unique-pluralsight-video-call-me-maybe.html">Unique Pluralsight Video - Call Me Maybe</a>
  </h2>

  <div>
    
    
    <p>&nbsp;</p>
<p class="MsoNormal">Pluralsight and my fellow authors are like a family. So much like a family, in fact, that we decided to take making fun to the next level. The good folks at <a href="http://www.pluralsight.com/">Pluralsight</a> <s>bribed</s> invited me and the rest of the authors to embarrass myself by lip synching a spoof video for the viral hit <a href="http://www.youtube.com/watch?v=fWNaR-rxAic">Call Me Maybe, by Carly Rae Jepsen</a>.&nbsp; Yes, you heard that right.<o:p></o:p></p>
<p class="MsoNormal">It involved a lot of <s>Tequila</s> courage but we did it. Special thanks to Megan and the crew at Pluralsight for the idea, the fun, and carrying it through in less than a week!<o:p></o:p></p>
<p class="MsoNormal">I&rsquo;m not sure words can describe the <s>awkwardness</s> <s>drunken foolishness</s> fun that we had making this video, so I&rsquo;ll just let you watch and decide for yourselves here.</p>
<p class="MsoNormal">&nbsp;</p>
<div class="wlWriterEditableSmartContent" id="scid:5737277B-5D6D-4f48-ABFC-DD9C333F4C5D:3104f859-e0cb-447d-bf9a-ff5bdbd0e684" style="width: 448px; display: block; float: none; margin-left: auto; margin-right: auto; padding: 0px;">
<div style="margin: 0px; padding: 0px; display: inline;" id="4be1b908-f69d-4e27-b40e-dff64f22ab5d">
<div>
<object height="252" width="448">
<param value="http://www.youtube.com/v/35U2yIG5oJg?hl=en&amp;hd=1" name="movie" /><embed height="252" width="448" type="application/x-shockwave-flash" src="http://www.youtube.com/v/35U2yIG5oJg?hl=en&amp;hd=1" /><a href="http://www.youtube.com/watch?v=35U2yIG5oJg&amp;feature=player_embedded">http://www.youtube.com/watch?v=35U2yIG5oJg&amp;feature=player_embedded</a>
</object>
</div>
</div>
</div>


    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    August
    23rd,
    
    2012
  </span>

  <h2>
    <a href="/javascript/knockout/mvvm/pluralsight/spa/uncategorized/2012/08/23/spapost7.html">Build Single Page Apps - Part 7 - MVVM and KnockoutJS</a>
  </h2>

  <div>
    
    
    <p>You knew it was coming, and you were right. MVVM and <a href="http://knockoutjs.com">Knockout</a> are 2 passions of mine and of course they are a big part of my upcoming <a href="http://www.pluralsight.com/">Pluralsight</a> course titled “Building Single Page Apps (SPA) with HTML5, ASP.NET Web API, Knockout and jQuery”. It’s less than 2 weeks to go before it’s due to go live!</p>

<p>You can catch up on the previous posts in this series here:</p>
<h3>More on the Code Camper SPA</h3>
<p>Part 1 - <a href="http://jpapa.me/spapost1">The Story Begins (What is the Code Camper SPA?)</a></p>

<p>Part 2 - <a href="http://jpapa.me/spapost2">Client Technologies</a></p>

<p>Part 3 - <a href="/spapost3">Server Technologies (the Data Layer)</a></p>

<p>Part 4 - <a href="http://jpapa.me/spapost4">Serving JSON with ASP.NET Web API</a></p>

<p>Part 5 - <a href="http://jpapa.me/spapost5">HTML 5 and ASP.NET Web Optimization</a></p>

<p>Part 6 - <a href="http://jpapa.me/spapost6">JavaScript Modules</a></p>

<p>Part 7 - <a href="http://jpapa.me/spapost7">MVVM and KnockoutJS</a></p>

<p>Part 8 - <a href="http://jpapa.me/spapost8">Data Services on the Client</a></p>

<p>Part 9 - <a href="http://jpapa.me/spapost9">Navigation, Transitions, Storage and Messaging</a></p>

<p>Part 10 - Saving, Change Tracking, and Commanding</p>

<p>Part 11 - Responsive Design and Mobility</p>

<p> </p>
<h3>MVVM</h3>
<p>I’ve talked and written a lot about Model View ViewModel (MVVM) in the past, and if you aren’t familiar with MVVM you can catch up with a <a href="http://visualstudiomagazine.com/articles/2011/08/15/fundamental-mvvm.aspx">MVVM primer from this article</a>. Are you back yet? Great. The good news for anyone who has done MVVM, MVP or MVC patterns (also known as the MV* patterns) is that you can follow this same pattern with JavaScript and SPA’s. In fact, its growing in popularity. KnockoutJS is a great library that handles data binding and integrates well with MVVM pattern. Together, they make a great pair. Let me explain a bit.</p>

<p>The HTML is our View and the data, which is very likely JSON, are our Model(s). So that covers the MV* part of MVVM. The way these fit together is important. We are apt to reuse Models in multiple Views, so it makes no sense to write redundant code with the copy/paste pattern when we need Person Model information in 4 or 5 Views. And how often is the data that comes from the web services and AJAX calls exactly what a View needs? Most of the time we need to tweak that data, adding new fields here, calculating other ones there, or cherry picking data form multiple Models for a View. This is where it is convenient to create an object that manages the View’s data … the View’s Models … the ViewModel.</p>

<p>The ViewModel can expose model data for the View to consume (via bindings and KnockoutJs). it’s not something that is specific for XAML … it works anywhere we have this separation of concerns.</p>

<p>The screenshot below shows the various types of data that the Code Camper SPA’s Favorites View needs. The data comes from various sources of models including Sessions (standard data), a list of dates of the events (lookup data), and filters. The first 2 come from web services while the latter (the filters) are completely driven by the View’s needs. All of these are aggregated together in a ViewModel.</p>

<p><a href="/wp-content/uploads/media/Windows-Live-Writer/7323e2fa09cf_145CD/image_5.png"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: block; margin-left: auto; margin-right: auto; padding-top: 0px; border: 0px;" title="image" src="/wp-content/uploads/media/Windows-Live-Writer/7323e2fa09cf_145CD/image_thumb_1.png" alt="image" width="616" height="463" border="0" /></a></p>
<h3><a href="http://knockoutjs.com">KnockoutJS</a></h3>
<p>We can certainly write jQuery to push the data into the HTML elements, and then pull them back out. That’s a lot of code that we don’t need to write though.  Knockout gives us data binding for that. KnockoutJS is a robust JavaScript data binding library that provides “observable” members which support two way bindings. I don’t cover Knockout in depth in the SPA course, but if you want in depth coverage of KnockoutJS you can catch <a href="http://jpapa.me/komvvm">my Pluralsight course on MVVM and Knockout here</a>.</p>

<p><a href="http://jpapa.me/komvvm"><img style="background-image: none; padding-left: 0px; padding-right: 0px; display: block; margin-left: auto; margin-right: auto; padding-top: 0px; border: 0px;" title="image" src="/wp-content/uploads/media/Windows-Live-Writer/7323e2fa09cf_145CD/image_3.png" alt="image" width="616" height="123" border="0" /></a></p>
<h3>ViewModel Example</h3>
<p>OK, I’ll give in … here is a quick example of a simple ViewModel. I shortened the contents of the functions because they are irrelevant really. The key here is that the list of publicly exposed members is at the bottom.</p>
<pre class="csharpcode">define(<span class="str">'vm.speaker'</span>,
[<span class="str">'ko'</span>, <span class="str">'datacontext'</span>, <span class="str">'config'</span>, <span class="str">'router'</span>, <span class="str">'messenger'</span>],
<span class="kwrd">function</span> (ko, datacontext, config, router, messenger) {
<span class="kwrd">var</span>
<span class="rem">// Properties</span>
currentSpeakerId = ko.observable(),
logger = config.logger,
speaker = ko.observable(),
speakerSessions = ko.observableArray(),
validationErrors = ko.observableArray(),
<span class="rem">// Knockout Computeds</span>
canEdit = ko.computed(<span class="kwrd">function</span> () {   .......   }),
isDirty = ko.computed(<span class="kwrd">function</span> () {   .......  }),
isValid = ko.computed(<span class="kwrd">function</span> () {   .......  }),
<span class="rem">// Methods</span>
activate = <span class="kwrd">function</span> (routeData, callback) {   .......  },
cancelCmd = ko.asyncCommand({
execute: <span class="kwrd">function</span>(complete) {   .......  },
canExecute: <span class="kwrd">function</span>(isExecuting) {   .......  }
}),
canLeave = <span class="kwrd">function</span> () {   .......  },
getSpeaker = <span class="kwrd">function</span> (completeCallback, forceRefresh) {   .......  },
goBackCmd = ko.asyncCommand({
execute: <span class="kwrd">function</span>(complete) {   .......  },
canExecute: <span class="kwrd">function</span>(isExecuting) {   .......  }
}),
saveCmd = ko.asyncCommand({
execute: <span class="kwrd">function</span>(complete) {   .......  },
canExecute: <span class="kwrd">function</span>(isExecuting) {   .......  }
}),
tmplName = <span class="kwrd">function</span> () {   .......  };
<span class="kwrd">return</span> {
activate: activate,
cancelCmd: cancelCmd,
canEdit: canEdit,
canLeave: canLeave,
goBackCmd: goBackCmd,
isDirty: isDirty,
isValid: isValid,
saveCmd: saveCmd,
speaker: speaker,
speakerSessions: speakerSessions,
tmplName: tmplName
};
});</pre>
<p>The ViewModel exposes the public members at the bottom, in the return object, and hides the rest. I’ll leave it here for now … there’s a lot of nice goodies in that code that may peak your interest. Next time, I’ll talk a bit more about how data flows throughout the client.</p>


    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    August
    17th,
    
    2012
  </span>

  <h2>
    <a href="/javascript/patterns/pluralsight/requirejs/spa/2012/08/17/spapost6.html">Build Single Page Apps - Part 6 - JavaScript Modules and Italian Food</a>
  </h2>

  <div>
    
    
    <p>SPA’s are apps too. And as such when creating a SPA you will find yourself writing code to get data, push data, handle validation, change tracking, storing data locally, presenting data, and so much more. All of these roles could be written in a scattered manner across the app, but that causes redundancy, low code re-use and a readability and maintenance headache. And for you pattern folks (like me) it also violates <a href="http://en.wikipedia.org/wiki/Don't_repeat_yourself">DRY</a> and <a href="http://en.wikipedia.org/wiki/Single_responsibility_principle">SRP</a>.  <p>So what do we do? Make more, smaller code files that each handle one specific job.  <p>You can get the details on how I use this approach in my upcoming <a href="http://www.pluralsight.com/">Pluralsight</a> course titled “Building Single Page Apps (SPA) with HTML5, ASP.NET Web API, Knockout and jQuery”. It’s T-minus 2 weeks before it’s due to be completed … so it’s getting close!  <p>You can catch up on the previous posts in this series here:  <h3>More on the Code Camper SPA</h3> <p>Part 1 - <a href="http://jpapa.me/spapost1">The Story Begins (What is the Code Camper SPA?)</a></p> <p>Part 2 - <a href="http://jpapa.me/spapost2">Client Technologies</a></p> <p>Part 3 - <a href="/spapost3">Server Technologies (the Data Layer)</a></p> <p>Part 4 - <a href="http://jpapa.me/spapost4">Serving JSON with ASP.NET Web API</a></p> <p>Part 5 - <a href="http://jpapa.me/spapost5">HTML 5 and ASP.NET Web Optimization</a></p> <p>Part 6 - <a href="http://jpapa.me/spapost6">JavaScript Modules</a></p> <p>Part 7 - <a href="http://jpapa.me/spapost7">MVVM and KnockoutJS</a></p> <p>Part 8 - <a href="http://jpapa.me/spapost8">Data Services on the Client</a></p> <p>Part 9 - <a href="http://jpapa.me/spapost9">Navigation, Transitions, Storage and Messaging</a></p> <p>Part 10 - <a href="http://jpapa.me/spapost10">Saving, Change Tracking, and Commanding</a> </p> <p>Part 11 - Responsive Design and Mobility</p> <p>&nbsp; <h5>Spaghetti to Ravioli </h5> <p>I get ideas that pop in my head quickly and then they often leave just as quickly. So it’s important for me to get them written in code before I lose that thought. Because of this, I write code in iterations. I write it, test it, refactor it, test it, refactor it, and so on.  <p><b>Pass 1: Toss the Spaghetti Against the Wall</b>  <p>The first pass of my code is rarely the best or most elegant, but it gets the job done. If I stopped here, I’d leave a code smell behind and have a lot of intermingled code that nobody would enjoy maintaining and would be impossible to test or expand upon.  <p><b>Pass 2: Tasting the Spaghetti</b>  <p>Then I refine the code for all use cases. This is where I make sure it handles the roles that the code needs to handle. It’s better code, but still has a lot of duplication and ugliness.  <p><b>Pass 3: Introducing Ravioli</b>  <p>Finally, I refactor it to be more maintainable. This is where I optimize the code, shorten it, create extension methods, service classes, and apply DRY and SRP.  <h5>Spaghetti Example</h5> <p>Let’s look at an extremely oversimplified and crude example. Below is an example of JavaScript code that displays a message. We could use this code throughout our app to display messages. However it explicitly hard codes the message to display, hard codes the jquery to do it, and if you wanted to change how it works you’d have to search all of your code to find it and replace it. Not very reusable and likely to have typos.<pre>$('#messagebox').text('Welcome to Code Camp, John');</pre>
<p>We could wrap this in a function, and that would help. But then what if other files want to use it? Then we need to make sure it is loaded in time. We could put it in its own module, and then it would be more reusable. Then we could make it use a custom message, but maybe a better solution is to tell it how to get the message. For that we could tell it to go talk to a module to get the message.
<p><i>Again, this is an overly simplified example … but it is easily applicable to larger code issues.</i>
<h5>Ravioli Example</h5>
<p>Below is an example of a JavaScript module called alerter. It’s job is to display a message. It doesn’t know what message it will display, because that’s not its job. For that it depend upon jQuery and another module called a dataservice. Notice that the module uses a define statement to identify:
<ol>
<li>The ID of the module
<li>The dependencies
<li>The factory for the module</li>
<p><a href="/wp-content/uploads/media/Windows-Live-Writer/da5ac51b8fae_F1AC/image_2.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; margin-left: auto; border-left-width: 0px; margin-right: auto; padding-top: 0px" title="image" border="0" alt="image" src="/wp-content/uploads/media/Windows-Live-Writer/da5ac51b8fae_F1AC/image_thumb.png" width="520" height="359" /></a></p>
<p>This code has a few advantages our first spaghetti example did not:</p>
<ol>
<li>This ‘alerter’ module can be loaded as needed (using RequireJS)
<li>It is self-sufficient since it defines the dependencies up top (jQuery and dataservice). RequireJS will go out and find those modules and load them first, before the alerter is cranked up. How nice!
<li>The alerter doesn’t know how to go get the message, it defers that to the dataservice. So alert just “alerts” the user … which is its job.
<li>Using this code all over our app is as simple as saying</li>
<p>alerter.showMessage()
<h5>RequireJS</h5>
<p>In my course I use <a href="http://requirejs.org/">RequireJS</a> to handle the dependency resolution for my modules. RequireJS helps:
<ol>
<li>Defines modules
<li>Resolve module dependencies
<li>Load scripts in the proper order (and asynchronously)</li>
<p>It does much more, too … but the reason I like using RequireJS is that it helps define a structure to the modules in my JavaScript apps that I otherwise would not have.
<h5>Want More?</h5>
<p>In my course I go deeper on this concept and show how modularity can make it much easier to manage a SPA as it grows. I include several examples and as a bonus, <a href="http://jpapa.me/requirejsdemo">here is a quick introductory sample using modularity and RequireJS on github that I wrote to help explain it. I call it kis-requirejs-demo for “Keep It Simple RequireJS Demo”</a>
<p>It’s part of a Visual Studio 2012 RTM solution, so you will need that to run it as is. Or you can pull the HTML and JavaScript out yourself and use another tool.



</p></p></p></li></li></ol></p></p></li></li></li></ol></li></li></ol></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p></p>

    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    August
    15th,
    
    2012
  </span>

  <h2>
    <a href="/visual%20studio%202012/windows%208/2012/08/15/windows-8-and-visual-studio-2012-now-available.html">Windows 8 and Visual Studio 2012 Now Available</a>
  </h2>

  <div>
    
    
    <p>Are you ready? Both Visual Studio 2012 and Windows 8 RTM today for <a href="http://msdn.microsoft.com">MSDN and TechNet subscribers. And they are available for download now</a>! </p>
<p>A word of caution … I had to go to the details list and search for both for them to appear (they did not show up in the home page for downloads for me). I’ve been using Windows 8 and VS 2012 (public) pre-releases for a while now and they are very solid and fast. </p>
<p>For those interested in Win8 … I grabbed these snippets of dates from <a href="http://windowsteamblog.com/windows/b/bloggingwindows/archive/2012/08/01/windows-8-has-reached-the-rtm-milestone.aspx">the Windows blog post</a>:</p>
<blockquote> <p>•&nbsp;&nbsp;&nbsp; August 15th: Developers will be able to download the final version of Windows 8 via your MSDN subscriptions.<br />•&nbsp;&nbsp;&nbsp; August 15th: IT professionals testing Windows 8 in organizations will be able to access the final version of Windows 8 through your TechNet subscriptions.<br />•&nbsp;&nbsp;&nbsp; September 1st: Volume License customers without Software Assurance will be able to purchase Windows 8 through Microsoft Volume License Resellers.</p> <p><img alt="Start_Default_RTM_3ROW" src="http://windowsteamblog.com/cfs-file.ashx/__key/CommunityServer-Blogs-Components-WeblogFiles/00-00-00-59-23-metablogapi/8688.Start_5F00_Default_5F00_RTM_5F00_3ROW_5F00_thumb_5F00_4D391858.png" /></p></blockquote>


    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    August
    13th,
    
    2012
  </span>

  <h2>
    <a href="/asp.net/html5/spa/web%20optimization/2012/08/13/spapost5.html">Build Single Page Apps - Part 5 - HTML 5 and ASP.NET Web Optimization</a>
  </h2>

  <div>
    
    
    <p>Single Page Apps (SPA) are all the rage, and while it’s exciting to talk about the JavaScript we use in the SPA, the HTML is just as important. If HTML5 tags are used, then its important to make sure that you prepare for a graceful degradation if you want older browser support. Also, the HTML shell should handle this and pull in scripts as efficiently as possible.  <p>You can read more about this and other topics in a few weeks when <a href="http://www.pluralsight.com/">Pluralsight</a> will be releasing my new course titled “Building Single Page Apps (SPA) with HTML5, ASP.NET Web API, Knockout and jQuery”. Til then, I’ve decided to journalize the creation of the course in a few posts. You can catch up on the previous posts in this series here:  <h3>More on the Code Camper SPA</h3> <p>Part 1 - <a href="http://jpapa.me/spapost1">The Story Begins (What is the Code Camper SPA?)</a></p> <p>Part 2 - <a href="http://jpapa.me/spapost2">Client Technologies</a></p> <p>Part 3 - <a href="/spapost3">Server Technologies (the Data Layer)</a></p> <p>Part 4 - <a href="http://jpapa.me/spapost4">Serving JSON with ASP.NET Web API</a></p> <p>Part 5 - <a href="http://jpapa.me/spapost5">HTML 5 and ASP.NET Web Optimization</a></p> <p>Part 6 - <a href="http://jpapa.me/spapost6">JavaScript Modules</a></p> <p>Part 7 - <a href="http://jpapa.me/spapost7">MVVM and KnockoutJS</a></p> <p>Part 8 - <a href="http://jpapa.me/spapost8">Data Services on the Client</a></p> <p>Part 9 - <a href="http://jpapa.me/spapost9">Navigation, Transitions, Storage and Messaging</a></p> <p>Part 10 - <a href="http://jpapa.me/spapost10">Saving, Change Tracking, and Commanding</a> </p> <p>Part 11 - Responsive Design and Mobility</p> <h3>HTML Best Practices </h3> <p>Staring at a blank canvas can be terrifying for developers. Come on, admit it .. as exciting as it is to start a new project, sometimes its just daunting to think “how do I get started?” The good news is that when starting with an HTML app there is help to get you going. And using best practices for HTML is actually quite simple. 2 of my favorite tools to get started are <a href="http://code.google.com/p/html5shiv/">HTML5 Shiv</a> and <a href="http://html5boilerplate.com/">HTML5 Boilerplate</a>. In my course I chose HTML5 Boilerplate and it offers these (and many more) benefits:</p> <p>1) Tips on where to put your scripts in the HTML page </p> <p>2) Mobility and responsive design help </p><pre class="csharpcode">  <span class="rem">&lt;!-- Mobile viewport optimized: h5bp.com/viewport --&gt;</span>
<span class="kwrd">&lt;</span><span class="html">meta</span> <span class="attr">name</span><span class="kwrd">="viewport"</span> <span class="attr">content</span><span class="kwrd">="width=device-width"</span><span class="kwrd">&gt;</span></pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, "Courier New", courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<p>3) CSS baseline for styles (check out the style.css included in the template)</p>
<p>4) Helps make your app work well across multiple browser brands and versions with modernizr </p><pre class="csharpcode"><span class="rem">&lt;!-- All JavaScript at the bottom, except this Modernizr build.</span>
<span class="rem">    Modernizr enables HTML5 elements &amp; feature detects </span>
<span class="rem">    for optimal performance. Create your own custom Modernizr </span>
<span class="rem">    build: www.modernizr.com/download/ --&gt;</span>
<span class="kwrd">&lt;</span><span class="html">script</span> <span class="attr">src</span><span class="kwrd">="js/libs/modernizr-2.5.3.min.js"</span><span class="kwrd">&gt;&lt;/</span><span class="html">script</span><span class="kwrd">&gt;</span></pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, "Courier New", courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<p>
<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, "Courier New", courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
5) Tips for scripts using CDNs and&nbsp; fallbacks </p><pre class="csharpcode"><span class="rem">&lt;!-- </span>
<span class="rem">Grab Google CDN's jQuery, with a protocol relative URL; </span>
<span class="rem">fall back to local if offline </span>
<span class="rem">--&gt;</span>
<span class="kwrd">&lt;</span><span class="html">script</span> <span class="attr">src</span><span class="kwrd">="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"</span><span class="kwrd">&gt;</span>
<span class="kwrd">&lt;/</span><span class="html">script</span><span class="kwrd">&gt;</span>
&lt;script&gt;
window.jQuery || document.write(
<span class="str">'&lt;script src="js/libs/jquery-1.7.1.min.js"&gt;&lt;\/script&gt;'</span>)
<span class="kwrd">&lt;/</span><span class="html">script</span><span class="kwrd">&gt;</span></pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, "Courier New", courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, "Courier New", courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>
<p>There is so much more in HTML5 Boilerplate and I highly recommend you check it out. Its fun to download the full version of it which includes tons of comments on what the features do. </p>
<h3>ASP.NET Web Optimization </h3>
<p>When building an app you may end up with a lot of JavaScript and CSS files. Some you write yourself and others you include from popular libraries like <a href="http://www.jquery.com">jQuery</a> or <a href="http://www.knockoutjs.com">Knockout</a> .&nbsp; You want to make sure you get those scripts and CSS to your browser as quickly and efficiently as possible. That’s where bundling and minification can make a huge impact. </p>
<p>The good news here is that there are many options, there is one backed right into the latest version of ASP.NET called <a href="http://nuget.org/packages/microsoft.aspnet.web.optimization">ASP.NET Web Optimization (available on NuGet)</a>. With this tool you can bundle your JavaScript (or CSS) into a few bundles. So instead of the browser making 40 requests for 40 files (if that is what you have), you could have the browser request 2 files (your bundles). Bundling is simply concatenating your files together.</p>
<p><a href="/wp-content/uploads/media/Windows-Live-Writer/3a1473c0c097_13F8F/image_6.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; margin-left: auto; border-left-width: 0px; margin-right: auto; padding-top: 0px" title="image" border="0" alt="image" src="/wp-content/uploads/media/Windows-Live-Writer/3a1473c0c097_13F8F/image_thumb_2.png" width="420" height="417" /></a></p>
<p>The other half of this equation is minifying your files, which cuts out whitespace and does some other tricks to shorten the contents of the files. In some cases these can greatly reduce the file size and thus make the request take a lot less time to get to the browser. Once the scripts are optimized, you can bring them to the browser via a regular script tag reference or through ASP/NET’s special Styles.Render and Scripts.Render syntax as follows:</p><pre class="csharpcode">@Styles.Render(<span class="str">"~/Content/mycss"</span>)
@Scripts.Render( <span class="str">"~/bundles/myjs"</span> )</pre>
<p>These are just a few of the feature of ASP.NET Web Optimization. You can see more about this feature in my course, as I use it to create a few key bundles for my scripts and CSS. </p>
<p>Next up I’ll explain some tips to kick off the SPA with JavaScript.</p>



</p></p>

    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    August
    6th,
    
    2012
  </span>

  <h2>
    <a href="/asp.net/entity%20framework/json/patterns/pluralsight/spa/webapi/2012/08/06/spapost4.html">Building Single Page Apps with HTML5, Knockout, jQuery, and Web API - Part 4 - Serving JSON with ASP.NET Web API</a>
  </h2>

  <div>
    
    
    <p>&nbsp;</p>
<p>It’s about T-4 weeks til my Pluralsight course is available. As I get closer to reaching completion I’ll continue sharing some thoughts on how the SPA is architected.</p>
<h3>Web Service Layer and JSON</h3>
<p>The X AJAX stands for XML … but most of us use AJAX for requesting/pushing JSON. Most HTML5/JavaScript apps these days deal with JSON which makes having solid and simple server side JSON serving tools (lots of S’s in there) really important. Enter the ASP.NET Web API, which I used an an integral part of the Code Camper SPA for my <a href="http://www.pluralsight.com/">Pluralsight</a> course, titled “Building Single Page Apps (SPA) with HTML5, ASP.NET Web API, Knockout and jQuery”. </p>
<p>Recently I wrote about how my new end to end course on how to build a SPA is progressing.&nbsp; In this post I share some of my thoughts on how the web service layer is designed in the course. I chose the the ASP.NET Web API because it simplifies web services, is ideal for serving JSON and follows a familiar pattern for me (ASP.NET MVC). I had other options, of course, even in the .NET realm. WCF, ASMX, or even MVC controllers exposing actions. But truth be told, the simplicity of the Web API made it a slam dunk.</p>
<h3>More on the Code Camper SPA</h3>
<p>Part 1 - <a href="http://jpapa.me/spapost1">The Story Begins (What is the Code Camper SPA?)</a></p>
<p>Part 2 - <a href="http://jpapa.me/spapost2">Client Technologies</a></p>
<p>Part 3 - <a href="/spapost3">Server Technologies (the Data Layer)</a></p>
<p>Part 4 - <a href="http://jpapa.me/spapost4">Serving JSON with ASP.NET Web API</a></p>
<p>Part 5 - <a href="http://jpapa.me/spapost5">HTML 5 and ASP.NET Web Optimization</a></p>
<p>Part 6 - <a href="http://jpapa.me/spapost6">JavaScript Modules</a></p>
<p>Part 7 - <a href="http://jpapa.me/spapost7">MVVM and KnockoutJS</a></p>
<p>Part 8 - <a href="http://jpapa.me/spapost8">Data Services on the Client</a></p>
<p>Part 9 - <a href="http://jpapa.me/spapost9">Navigation, Transitions, Storage and Messaging</a></p>
<p>Part 10 - <a href="http://jpapa.me/spapost10">Saving, Change Tracking, and Commanding</a> </p>
<p>Part 11 - Responsive Design and Mobility</p>
<h3>Controllers</h3>
<p>Controllers are at the heart of the Web API. If you know MVC then this will flow pretty easily for you. Even if you don’t know MVC&lt; the concept is pretty simple. A client makes a HTTP request, it is sent to the server, the Web API routes it to a Controller (a class), and the Controller handles the request. A ASP.NET Web API Controller is simply a class that inherits from ApiController.</p>
<p>The Code Camper SPA has a view which needs a summary list of sessions. So I exposed a method on a Web API Controller to return a list of SessionBrief models. All I have to do from the client was make an ajax request to /api/sessionbriefs </p>
<p>//C# &lt;pre class="csharpcode"&gt;<span class="kwrd">public</span> <span class="kwrd">class</span> SessionBriefsController : ApiControllerBase
{
<span class="kwrd">public</span> SessionBriefsController(ICodeCamperUow uow)
{
Uow = uow;
}
<span class="kwrd">public</span> IEnumerable&lt;SessionBrief&gt; Get()
{
<span class="kwrd">return</span> Uow.Sessions.GetSessionBriefs()
.OrderBy(sb =&gt; sb.TimeSlotId);
}
}&lt;/pre&gt;</p>
<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, "Courier New", courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, "Courier New", courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<p>The ApiControllerBase class is a very simple class that defines the Uow property and inherits from the ApiController class. This adds the Unit of Work class instance to all controllers that inherit from it , which in turn allows them to talk to the database (indirectly). </p>
<h3>Routes</h3>
<p>Web API works off convention over configuration, so ajax calls to /api/sessionbriefs will be routed to it. This route (below) helps route the call to the intended Controller.</p>
<pre class="csharpcode">routes.MapHttpRoute(
name: ControllerOnly,
routeTemplate: <span class="str">"api/{controller}"</span>
);</pre>
<style type="text/css">.csharpcode, .csharpcode pre
{
font-size: small;
color: black;
font-family: consolas, "Courier New", courier, monospace;
background-color: #ffffff;
/*white-space: pre;*/
}
.csharpcode pre { margin: 0em; }
.csharpcode .rem { color: #008000; }
.csharpcode .kwrd { color: #0000ff; }
.csharpcode .str { color: #006080; }
.csharpcode .op { color: #0000c0; }
.csharpcode .preproc { color: #cc6633; }
.csharpcode .asp { background-color: #ffff00; }
.csharpcode .html { color: #800000; }
.csharpcode .attr { color: #ff0000; }
.csharpcode .alt
{
background-color: #f4f4f4;
width: 100%;
margin: 0em;
}
.csharpcode .lnum { color: #606060; }
</style>

<p>Because the ajax request uses an HTTP GET verb, the Get method in the controller is invoked. Then the unit of work (UoW) does its job to get the list of SessionBrief models. Finally, the Web API returns the models as JSON to the client. And when the Code Camper SPA makes PUT, POST, and DELETE requests, they are routed to the Controller’s matching methods for those.</p>
<h3>And More</h3>
<p>The keys to using the ASP.NET Web API are to set up the routes to the controllers and deciding how to define your controllers and their methods. Once you do that, using the Web API is a breeze. In my course I explain how the different routes in the Code Camper SPA work, how the controllers were designed, and how Ward Bell and I decided to customize them. We ended up using a combination of what I refer to as controller-per-type (a controller services an entity by convention) or custom controllers (mixture of RPC and REST styled calls).</p>
<p>Perhaps my favorite “closet feature” of the Web API is how you can tell it to return models using camelCase. So instead of getting back a SpeakerId property I get speakerId in the JSON. Very simple to implement, but its great and sticks with conventional JavaScript practices.</p>
<p>//C#&lt;pre class="csharpcode"&gt;<span class="kwrd">public</span> <span class="kwrd">class</span> SessionBrief
{
<span class="kwrd">public</span> <span class="kwrd">int</span> Id { get; set; }
<span class="kwrd">public</span> <span class="kwrd">string</span> Title { get; set; }
<span class="kwrd">public</span> <span class="kwrd">int</span> speakerId { get; set; }
}&lt;/pre&gt;//JavaScript &lt;pre class="csharpcode"&gt;<span class="kwrd">var</span> sessionBrief = {
id: 1,
title: <span class="str">‘A Trip to a SPA’</span>,
speakerId: 7
};&lt;/pre&gt;</p>
<h3>Next Up</h3>
<p>Next time, I’ll share some insight on how the “single page” in the Single Page App is designed and optimized.</p>


    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    July
    29th,
    
    2012
  </span>

  <h2>
    <a href="/asp.net/entity%20framework/patterns/pluralsight/spa/webapi/2012/07/29/spapost3.html">Building Single Page Apps with HTML5, Knockout, jQuery, and Web API - Part 3 - Server Technologies</a>
  </h2>

  <div>
    
    
    <p>Some skills never go out of fashion. Managing data and serving it up to a client is one of those skills. Sure, the technologies change and the way we use them, but we’re still gathering and delivering data.</p>
<p>Recently I wrote about how my new course is progressing for <a href="http://www.pluralsight.com/">Pluralsight</a>. The course, titled “Building Single Page Apps (SPA) with HTML5, ASP.NET Web API, Knockout and jQuery” , is an end to end course. This means I cover the app and how it uses all of the technologies to produce the SPA. </p>
<p>Today I’ll share some insights on the server technologies I am using in Code Camper SPA. The diagram below shows the key ingredients I used to create the server technologies. One of the goals of this architecture is to surface the data in an simple way so I can add new ways to get to the data or even add new data fairly quickly. The main idea was to keep the Web API’s methods simple, which I think was achieved.</p>
<p><a href="/wp-content/uploads/media/Windows-Live-Writer/Building-Single-Page-APps_9356/image_2.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; margin-left: auto; border-left-width: 0px; margin-right: auto; padding-top: 0px" title="image" border="0" alt="image" src="/wp-content/uploads/media/Windows-Live-Writer/Building-Single-Page-APps_9356/image_thumb.png" width="520" height="441" /></a></p>
<p>I’ve been down this road many times in creating server architectures to serve data so I had a pretty good idea of what I wanted to keep the same and what new technologies and patterns I wanted to sprinkle in. Also, it helps to have good friends like <a href="http://twitter.com/danwahlin">Dan Wahlin</a> and <a href="http://twitter.com/wardbell">Ward Bell</a> to bounce some ideas off. We three tend to think alike so you will see some similarities in how we address these issues. Ward had a very active hand in helping shape this particular app as my unofficial code reviewer (and often telling me I was crazy).</p>
<h3>Database</h3>
<p>I started out thinking I would use SQL Server but decided to go with SQL Server CE, just because it makes distributing the database that much simpler. Of course, for production apps I recommended SQL Server over CE. The database is rather simple, but has enough real world scenarios in it to drive the points home. We have sessions, speakers, attendees, tracks, time slots, and many to many joins between sessions and attendees.</p>
<h3>Entity Framework Code First (Magical Unicorn Edition)</h3>
<p>I chose Entity Framework (EF) Code First (v4.x or v5 will work) for 2 reasons. First, experience matters. It’s a solid ORM that works well with web technologies as it has proven to do the job for me in my experiences. Second, I wanted to write my model separate from the database and use pure POCO (plain old class objects). EF Code First does a great job at staying out of my way when I create my models.</p>
<p>I do wish that EF Code First had a more appropriate name. Its name implies that you have to create your code first, then generate the database. That’s the impression I run <a href="/wp-content/uploads/media/Windows-Live-Writer/Building-Single-Page-APps_9356/image_4.png"><img style="background-image: none; border-right-width: 0px; margin: 4px; padding-left: 0px; padding-right: 0px; display: inline; float: left; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" align="left" src="/wp-content/uploads/media/Windows-Live-Writer/Building-Single-Page-APps_9356/image_thumb_1.png" width="100" height="91" /></a>into quite often – but its not entirely accurate. EF Code <a href="/wp-content/uploads/media/Windows-Live-Writer/Building-Single-Page-APps_9356/image_6.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: right; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px; padding-top: 0px" title="image" border="0" alt="image" align="right" src="/wp-content/uploads/media/Windows-Live-Writer/Building-Single-Page-APps_9356/image_thumb_2.png" width="100" height="118" /></a>First can generate the database from models, but it doesn’t have to. You can certainly create the database and the models separately. The fluent API (or data annotations) allow you to hook them up where the conventions may be different between the models and database. So while Scott Hanselman dubbed EF the “Magical Unicorn Edition”, I’d settle with a revised name of “EF POCO Loco <img style="border-bottom-style: none; border-left-style: none; border-top-style: none; border-right-style: none" class="wlEmoticon wlEmoticon-smile" alt="Smile" src="/wp-content/uploads/media/Windows-Live-Writer/Building-Single-Page-APps_9356/wlEmoticon-smile_2.png" />“</p>
<h3>Patterns</h3>
<p>Yes, I like data patterns. And you will find a few in this course including the Repository Pattern (to expose the data in a consistent way), Unit of Work Pattern (to decouple the Web API from the lower layers and to aggregate the repositories), the Factory pattern (for creating repositories), and Single Responsibility Principle (SRP). The SRP is all throughout the client and server, in fact. Simply put, the patterns help make the app easier to debug, scale and maintain.</p>
<h3>ASP.NET Web API</h3>
<p>Serving data has evolved. We’ve done it with SOAP and with REST. Most recently the tools/technologies we use for serving web services has gone from using ASMX to WCF to MVC actions and now to the ASP.NET Web API. Recently I had use MVC actions to serve JSON data through RESTful services for my client apps in Silverlight and JavaScript. In fact, when I worked on the <a href="http://www.pluralsight-training.net/microsoft/Courses/TableOfContents/web-development">Account at a Glance app with Dan Wahlin</a> we used this technique. But the ASP.NET Web API makes serving JSON data much easier and honestly, it just feels better. I love the simplicity of the API Controllers’ methods and how it just meshes well with a modern SPA. So it made a great choice here. In the course I cover how to define routes, different types of controllers you can create, using IoC, web optimization, and other ways to customize the Web API for the Code Camper SPA.</p>
<p>I’m very happy with how the app has shaped up on the server side (and overall).</p>
<h3>More on the Code Camper SPA</h3>
<p>Part 1 - <a href="http://jpapa.me/spapost1">The Story Begins (What is the Code Camper SPA?)</a></p>
<p>Part 2 - <a href="http://jpapa.me/spapost2">Client Technologies</a></p>
<p>Part 3 - <a href="/spapost3">Server Technologies (the Data Layer)</a></p>
<p>Part 4 - <a href="http://jpapa.me/spapost4">Serving JSON with ASP.NET Web API</a></p>
<p>Part 5 - <a href="http://jpapa.me/spapost5">HTML 5 and ASP.NET Web Optimization</a></p>
<p>Part 6 - <a href="http://jpapa.me/spapost6">JavaScript Modules</a></p>
<p>Part 7 - <a href="http://jpapa.me/spapost7">MVVM and KnockoutJS</a></p>
<p>Part 8 - <a href="http://jpapa.me/spapost8">Data Services on the Client</a></p>
<p>Part 9 - <a href="http://jpapa.me/spapost9">Navigation, Transitions, Storage and Messaging</a></p>
<p>Part 10 - <a href="http://jpapa.me/spapost10">Saving, Change Tracking, and Commanding</a> </p>
<p>Part 11 - Responsive Design and Mobility</p>


    
    
  </div>

</article>


<article class="home">

  <span class="post-date">
    
    July
    24th,
    
    2012
  </span>

  <h2>
    <a href="/jquery/knockout/mvvm/patterns/pluralsight/spa/uncategorized/2012/07/24/spapost2.html">Building Single Page Apps with HTML5, Knockout, jQuery, and Web API - Part 2 - Client Technologies</a>
  </h2>

  <div>
    
    
    <p>Last week <a href="http://jpapa.me/spapost1">I wrote about the overall story for my new course</a> for <a href="http://www.pluralsight.com/">Pluralsight</a> “Building Single Page Apps (SPA) with HTML5, ASP.NET Web API, Knockout and jQuery” (due out August 31st). This week I want to share some of the client technologies that I am exploring in the SPA. This is an end to end course, so I cover the app and how it uses all of the technologies to produce the SPA. To avoid the course being 100 hours long, I cover just the pieces you need to know about to build a SPA. This should help keep the course flowing along from topic to topic.</p>
<p>I’ll keep putting these types of posts out to help compliment my course as long as you continue to find them useful.</p>
<p>Here is a diagram from the course which hits some of the major 3rd party JavaScript libraries I demonstrate in the course. jQuery makes working with the DOM and making AJAX calls easy, and I use a series of plug ins for <a href="http://jquery.com/">jQuery</a> to help with things like creating mock data (<a href="https://github.com/mennovanslooten/mockJSON">jquery.mockjson</a>) and creating activity indicators (<a href="http://neteye.github.com/activity-indicator.html">jquery.activity</a>).</p>
<p><a href="/wp-content/uploads/media/Windows-Live-Writer/e0159bea5237_14AA8/image_2.png"><img style="background-image: none; border-right-width: 0px; padding-left: 0px; padding-right: 0px; display: block; float: none; border-top-width: 0px; border-bottom-width: 0px; margin-left: auto; border-left-width: 0px; margin-right: auto; padding-top: 0px" title="image" border="0" alt="image" src="/wp-content/uploads/media/Windows-Live-Writer/e0159bea5237_14AA8/image_thumb.png" width="520" height="424" /></a></p>
<p>It’s no surprise that I am using <a href="http://knockoutjs.com/">Knockout</a> in the course, since I make it no secret that I am a huge fan. Knockout provides data binding and is a solid foundation for MVVM in a web application, including SPAs.</p>
<p>Along with Knockout I use a series of plug ins for it to handle commanding (something <a href="https://twitter.com/hfjallemark">Hans</a> and I co-wrote), change tracking (with the help of <a href="https://twitter.com/stevensanderson">Steve Sanderson</a> and <a href="https://twitter.com/RPNiemeyer">Ryan Niemeyer</a>), <a href="https://github.com/ifandelse/Knockout.js-External-Template-Engine">Templating</a> (<a href="https://twitter.com/ifandelse">Jim Cowart’s</a> library), and <a href="https://github.com/ericmbarnard/Knockout-Validation">Validation</a> (<a href="https://twitter.com/ericmbarnard">Eric Barnard’s</a> library). These Knockout plug-ins all play a central role in building the application. For example, the app covers validating the data before sending on to the Web API. The Validation plug in works great for this and it works nicely with or without HTML5. I’ll be posting the change tracking and commanding plug ins to github over the next few weeks, too.</p>
<p>You can <a href="http://jpapa.me/komvvm">dig deep into Knockout right now by checking out my Knockout course on Pluralsight</a>.</p>
<p><a href="http://jpapa.me/komvvm"><img alt="ko ps" src="/wp-content/uploads/media/Windows-Live-Writer/bbe49adbff7e_140DD/ko%20ps_3.png" width="450" height="77" /></a></p>
<p>I enjoyed using <a href="http://amplifyjs.com/">amplify</a> for abstracting my AJAX calls so I could use mock data. Plus it has the added bonus of helping with local storage and messaging (yes, that same messaging concept from MVVM). Thanks to <a href="https://twitter.com/elijahmanor">Elijah Manor</a> for pointing this one out to me.</p>
<p>Quick notes about the rest from the diagram above&nbsp; ….</p>
<ul> <li><a href="http://sammyjs.org/">Sammy</a> is simple and effective library for managing routing and history for both modern and older browsers.  <li><a href="http://requirejs.org/">Require</a> helps with <a href="http://addyosmani.com/writing-modular-js/">Asynchronous Module Definition (AMD)</a> … one feature is dependency resolution.  <li><a href="http://underscorejs.org/">underscore</a> is a fantastic helper that I found quite useful for dealing with array, collection, and object manipulation where the browser’s support of JavaScript was lacking.  <li><a href="http://momentjs.com/">moment</a> is my favorite date library because, well, dates suck  <li><a href="https://github.com/CodeSeven/toastr">toastr</a> is my toast/alert/popup library for HTML.  <li><a href="http://docs.jquery.com/QUnit">qunit</a> is a simple unit testing library </li> <p>I cover how to make all of these libraries work together in a decoupled manner, using patterns like MVVM, AMD, Revealing Module Pattern and much more. Of course, there is a ton of custom code too.</p> <p>If interested, I’ll touch on some of the server side technology I use in the next post.</p> <p>Until next time!</p> <h3>More on the Code Camper SPA</h3> <p>Part 1 - <a href="http://jpapa.me/spapost1">The Story Begins (What is the Code Camper SPA?)</a></p> <p>Part 2 - <a href="http://jpapa.me/spapost2">Client Technologies</a></p> <p>Part 3 - <a href="/spapost3">Server Technologies (the Data Layer)</a></p> <p>Part 4 - <a href="http://jpapa.me/spapost4">Serving JSON with ASP.NET Web API</a></p> <p>Part 5 - <a href="http://jpapa.me/spapost5">HTML 5 and ASP.NET Web Optimization</a></p> <p>Part 6 - <a href="http://jpapa.me/spapost6">JavaScript Modules</a></p> <p>Part 7 - <a href="http://jpapa.me/spapost7">MVVM and KnockoutJS</a></p> <p>Part 8 - <a href="http://jpapa.me/spapost8">Data Services on the Client</a></p> <p>Part 9 - <a href="http://jpapa.me/spapost9">Navigation, Transitions, Storage and Messaging</a></p> <p>Part 10 - <a href="http://jpapa.me/spapost10">Saving, Change Tracking, and Commanding</a> </p> <p>Part 11 - Responsive Design and Mobility</p>



</li></li></li></li></li></ul>

    
    
  </div>

</article>

<hr/>

<ul class="pager"> 

  
  <li class="previous">
    
    <a href="/page14">&larr; Newer</a>
    
  </li>
  
  
  <li>
    <span class="page_number">Page: 15 of 86</span>
  </li>

  
  <li class="next">
    <a href="/page16">Older &rarr;</a>
  </li>
  

</ul>





      <footer class="footer-text">
        <hr/>
        <p>
        Copyright © 2015 - John Papa Blog content licensed under the Creative Commons <a href="http://creativecommons.org/licenses/by/2.5/">CC BY 2.5</a>
        | Unless otherwise stated or granted, code samples licensed under the <a href="http://sm.mit-license.org/">MIT license</a>.
        | Site design based on the <a href="https://github.com/dbtek/dbyll">dbyll theme</a> under the <a href="http://sm.mit-license.org/">MIT license</a>
      </p>

      </footer>

    </div>

    <script type="text/javascript" src="/assets/resources/jquery/jquery.min.js"></script>
    <script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/assets/js/app.js"></script>

    <!--Developer Media Links-->
    <script type='text/javascript'>
        function _dmBootstrap(file) {
    var _dma = document.createElement('script'); _dma.type = 'text/javascript'; _dma.async = true; _dma.src = ('https:' == document.location.protocol ? 'https://' : 'http://')
    + file;
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(_dma);
    }
    function _dmFollowup(file) { if (typeof DMAds === 'undefined') _dmBootstrap('cdn2.DeveloperMedia.com/a.min.js');}
    (function () { _dmBootstrap('cdn1.DeveloperMedia.com/a.min.js');
    setTimeout(_dmFollowup, 2000);})();
    </script>

    <!--<script language="JavaScript" src="http://ad.doubleclick.net/N6839/adj/lqm.johnpapa.site/ron;kw=%2Cjohn%2Cpapa%2Cblog%2Cjohnpapa%7Bdot%7Dnet%2Cjohnpapa%2Cpappa%2Cwww%7Bdot%7Djohnpapa%7Bdot%7Dnet%2Cjon%2Cangular%2Cjhon;sz=160x600;dc_ref=http%3A%2F%2Fwww.johnpapa.net%2F;tile=1;ord=BEAAB484DA88D8D84B9DCB004E5712BE?"
    type="text/javascript"></script>-->

    <div data-type="ad" data-publisher="lqm.johnpapa.site" data-zone="ron" data-format="728x90" class="col-centered"></div>

</body>

</html>


<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl =
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'johnpapa']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

